# ASMB 白皮书
### 摘要
ASMB (自动伸缩网状区块链），区别于传统单链结构，ASMB采用DPOS+共识算法分片技术实现了一种结构像渔网一样的区块链，能够随着消息量的增多网口逐渐扩大，随着消息量的减少网口逐渐缩小，理论上渔网口可以无限扩大，也就是TPS可以逐步无限扩大。真正解决了区块链交易速度、交易费用和交易容量不足的问题，使之能够成为日活千万的Web3，元宇宙等应用的底层平台成为可能甚至唯一选择，因为ASMB足以支撑无限的日活容量，超低的费用，甚至无费用。

_中文名：自动伸缩网状区块链 外文名：ASMB_

_代 币：Maons_

### 背景
自2008年比特币出现以来，区块链技术得到不断地传播与发展，目前不断出现的区块链新技术都在致力于解决区块链可扩展性的瓶颈，满足不断增长的用户需求，交易速度、交易费用和交易容量不足的问题，也直接导致了加密货币不能充当在日常价值交互媒介，以及各大公链平台也都不能成为一个日活千万的Web3应用的底层平台，Web2时代你生产的各种文字、视频作品以及收益权都属于平台所有，Web3时代你将成为真正的数据的主人，Web3一旦出现一定会得到所有人的拥护，所以解决区块链交易速度和交易容量的问题已经迫在眉睫。

### 共识算法(DPOS+)
- 投票，全网持有代币的人可以通过投票系统来选择区块生产者，共99个生产者，任何人都可以参与区块的生产。
- 出块间隔，每3秒生产一个区块（目前公测阶段设置为10s），任何时刻，只有一个生产者被授权产生区块，如果在该时间内生产者不出块或者其他任意不符合代码约束行为（有人恶意修改代码）其他节点立刻发起raft公投将该节点踢出生产者列表，并取消该时间段的生产的区块，按照投票排名顺序提名一个新的生产者。
- 分片，在过去一个统计周期内，已经确认的消息数量大于平均区块大小分裂设定值时，区块一分为二，区块哈希作为子区块的父区块，像渔网一样可以一直分裂下去，称为加升，当确认的消息数量小于区块合并值时，区块合并到相邻的两个区块上，称为减升。每多一个分片生产者都要提前添加一个服务器节点，以提供足够的算力和存储资源为新的分片做准备。
- 交易确认，正常情况下生产者是不允许不出块的，3s就可以被确认，在这种强一致情况下，第二块区块确认后就可以认为是不可逆的了(只要有一个节点发现异常都会发出raft,相当于省略了正常出块的raft，加快整体出块速度），也就是6s。
### 交易费用
交易费用与比特币费用模型一样，与消息字节大小相关，价高者优先处理，每个生产者都可以设置最低费率，低于最低费率不会被该生产者接收，费率可以设置为0，在项目初始阶段生产者每生产一个区块奖励一个代币，项目后期生产者收益全由交易费用支撑。
一个简单的交易消息输入+输出一共280个字节左右，按默认费率0.0001 Maons计算,一个普通交易需要费用是0.028 Maons。
### 账户

- 普通账户，20个字节的随机字符，类似于以太坊账户，具有一定的匿名性。
- 法定账户（未来有可能落实），一个绑定个人识别码的账户（与各地政府合作，设置一个合法的加密个人信息中心,只对外提供身份验证接口，任何人无法访问这些信息，除了拥有信息秘钥的自己，安全方面在量子计算到来之前，升级加密数据，并将旧数据销毁），未来Web3应用的高级用户，区别于普通用户可以随意申请丢弃，目的是限制恶意灌水刷票行为，为一些想要通过人人平台的投票等应用提供支持，不受个人拥有token数量的影响。

### 区块结构
区别于传统单链结构，ASMB的区块结构像渔网一样可以无限扩大。
- 分片，统计账户在过去一段时间内的交易频率的地址中位数，按照20个字节账户的地址空间,将地址分成无数个分片，最终达到的效果是哪些地址空间交易越频繁，越容易发生分片，每分出一个新分片，都要有新的节点提供服务，哪些地址空间交易量减少，分片就会发生合并，分片的数量取决于一段时间内交易的数量。
- 区块哈希，哈希是默克尔树的根，默克尔树的key 是高度+分片，树的value是RLP编码的区块内容，最新的分片的区块哈希包含该区块地址空间内的所有区块，也就是说通过区块哈希，可以查找该分片区间内高度小于等于该区块高度的所有区块。
- 区块父哈希，父哈希包含同高度的两个左右相邻区块，这样就使得区块像网一样无限扩展相连，并且下一个区块必须等待相连两个区块完成才能生产完成。
- 账户状态，同以太坊一样账户的状态是一个默克尔树，账户状态包括，余额、投票信息、凭据哈希、和其他信息。
- 交易凭据，每个账户都有一个默克尔树用来保存凭据，树的key是 消息发生的时间+消息哈希值，树的value是 消息状态+消息RLP编码内容，特别方便按照时间查询账户下面的消息情况。
- 区块存储，区块的默克尔树序列化时会直接存储在ipfs网络上，也就是说存储是去中心化，只有要足够多的节点存储，任何人都能随时从ipfs网络上请求区块数据。
  
### 数据存储

数据爆炸与区块链存储的矛盾？

区块链如何应对数据爆炸的Web3时代？

- 全球共识状态一致

- 个人数据个人保存

- 数据共享全球可达


### 智能合约（AVM）

- 分布式状态

分布式合约状态数据保存在每个账户状态中，合约执行变成不相关并行方式，相关操作顺序执行，

- 兼容以太坊合约地址状态方式
  
每个合约所有数据保存在合约地址账户状态内，所有操作都要经过合约地址，由于每个地址最多只能存在一个分片，所以tps 受单分片最大TPS限制。

### 智能节点
这是作为一个去中心化网络的最终理想状态，结合大数据自我学习，从而自我治理。达到这种状态似乎是不可能的，或许在发展和演变的过程中存在以下一种可能，99个节点其中有一个节点逐步达到自治，然后所有节点都达到自治，达到自治的过程如下，
1. 第一步，解决服务器资源自我治理，建立对外服务接口，使全球各地服务器资源采样竞价的方式提供存储和计算服务，使用节点得到的奖励作为交换。要达到这种状态首先要解决如何托管资源，如果保证运行的计算程序不被服务器硬件资源提供者篡改，导致意外的运行结果。我在考虑有没有可能资源供应者提供root用户后，智能节点获得所有权后，修改资源权限，防止其他任何人进入系统，然后自动运行校检后的程序，从而保证程序不被篡改。
2. 随着AI的发展，AI机器人的发展，可以雇佣AI机器人自动维护机。
3. 通过智能节点自我的学习，或许会有无限的可能。
   
   

### 治理
ASMB公链平台未来的发展主要分为三个阶段，在这三个阶段也分别由三种不同的治理方式来治理:
- 阶段一，由初创者开发初始功能。
- 阶段二，由初创者通过代币激励的方式带领感兴趣的开发者开发一些区块链基础功能设施。
- 阶段三，由所有人投票决定，任何人都可以发起公投，公投有两种，一种是写在代码里的，投票达到标准就会立即执行的，比如冻结，解冻，一种是自由公投，任何人有任何想法都可以发起公投，只要票数足够多就有可能落地执行。
- 终极状态，自我学习，自我治理状态。


### 发展

### 未来



资料：

https://gitee.com/asmb

https://github.com/asmbio/doc

内测体验版：

https://github.com/asmbio/Release
